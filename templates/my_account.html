{% extends "layout.html" %}
{% block title %}My Account | Community Connect{% endblock %}

{% block content %}
<div class="bubble-container">
    <div class="bubble">
        <h2 class="text-center mb-4">My Account</h2>

        {% if user.role == "volunteer" %}
        <!-- Volunteer Account Info Form -->
        <form method="POST" action="{{ url_for('my_account') }}">
            <div class="mb-3">
                <label class="form-label">Email</label>
                <input type="email" class="form-control" name="email" value="{{ user.email }}" required>
            </div>
            <div class="mb-3">
                <label class="form-label">New Password</label>
                <input type="password" class="form-control" name="password" placeholder="Leave blank to keep current">
            </div>
            <div class="mb-3">
                <label class="form-label">Phone Number</label>
                <input type="text" class="form-control" name="phone_number" value="{{ user.phone_number or '' }}">
            </div>
            <div class="mb-3">
                <label class="form-label">First Name</label>
                <input type="text" class="form-control" name="first_name" value="{{ volunteer.first_name }}">
            </div>
            <div class="mb-3">
                <label class="form-label">Last Name</label>
                <input type="text" class="form-control" name="last_name" value="{{ volunteer.last_name }}">
            </div>
            <div class="mb-3">
                <label class="form-label">Availability</label>
                <select class="form-select" name="availability">
                    <option value="Day" {% if volunteer.availability == "Day" %}selected{% endif %}>Day</option>
                    <option value="Night" {% if volunteer.availability == "Night" %}selected{% endif %}>Night</option>
                </select>
            </div>
            <button type="submit" class="btn btn-custom w-100">Update Account</button>
        </form>

        <hr>

        <!-- Volunteer Skills Form -->
        <h4>My Skills</h4>
        <form method="POST" action="{{ url_for('update_skills') }}">
            <div class="d-flex flex-wrap">
                {% for skill in all_skills %}
                    <div class="form-check me-3">
                        <input class="form-check-input" type="checkbox"
                            name="skills"
                            value="{{ skill.skill_id }}"
                            {% if skill.skill_id in volunteer_skills %}checked{% endif %}>
                        <label class="form-check-label">{{ skill.name }}</label>
                    </div>
                {% endfor %}
            </div>
            <button type="submit" class="btn btn-primary mt-2">Update Skills</button>
        </form>


        {% elif user.role == "organisation" %}
        <!-- Organisation Account Info Form -->
        <form method="POST" action="{{ url_for('my_account') }}">
            <div class="mb-3">
                <label class="form-label">Email</label>
                <input type="email" class="form-control" name="email" value="{{ user.email }}" required>
            </div>
            <div class="mb-3">
                <label class="form-label">New Password</label>
                <input type="password" class="form-control" name="password" placeholder="Leave blank to keep current">
            </div>
            <div class="mb-3">
                <label class="form-label">Phone Number</label>
                <input type="text" class="form-control" name="phone_number" value="{{ user.phone_number or '' }}">
            </div>
            <div class="mb-3">
                <label class="form-label">Organisation Name</label>
                <input type="text" class="form-control" name="organisation_name" value="{{ organisation.name }}">
            </div>
            <div class="mb-3">
                <label class="form-label">Address</label>
                <input type="text" class="form-control" name="organisation_address" value="{{ organisation.address }}">
            </div>
            <div class="mb-3">
                <label class="form-label">Website</label>
                <input type="url" class="form-control" name="organisation_website" value="{{ organisation.website_url or '' }}">
            </div>
            <div class="mb-3">
                <label class="form-label">Description</label>
                <textarea class="form-control" name="organisation_description">{{ organisation.description }}</textarea>
            </div>
            <button type="submit" class="btn btn-custom w-100">Update Account</button>
        </form>
        {% endif %}
    </div>
</div>
{% endblock %}

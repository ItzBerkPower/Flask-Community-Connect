{% extends "layout.html" %}
{% block title %}Events | Community Connect{% endblock %}

{% block content %}
<div class="bubble-container">
  <div class="bubble">
    <h2 class="text-center mb-4">All Events</h2>

    {% if role == "organisation" %}
      <div class="text-end mb-3">
        <a href="{{ url_for('create_event') }}" class="btn btn-success">+ Create Event</a>
      </div>
    {% endif %}

    <ul class="list-group">
      {% for e in events %}
        <li class="list-group-item">
          <strong>{{ e.title }}</strong> (by {{ e.name }})<br>
          <small>{{ e.event_date }} | {{ e.location }}</small><br>
          <span>{{ e.description }}</span><br>
          {% if e.skills %}
            <span class="badge bg-info">Skills: {{ e.skills }}</span>
            {% endif %}

          {% if session.get('role') == 'organisation' and session.get('user_id') == e.user_id %}
          <form method="POST" action="{{ url_for('delete_event', event_id=e.event_id) }}" style="margin:0;">
              <button type="submit" class="btn btn-danger btn-sm">Delete</button>
          </form>
          {% endif %}
        </li>
      {% else %}
        <li class="list-group-item">No events available yet.</li>
      {% endfor %}
    </ul>
  </div>
</div>
{% endblock %}
